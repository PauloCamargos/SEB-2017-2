<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<link type="text/css" rel="stylesheet" href="popup.php_arquivos/SyntaxHighlighter.css">
		<script language="javascript" src="popup.php_arquivos/shCore.js"></script>
		<script language="javascript" src="popup.php_arquivos/shBrushCpp.js"></script>
		<script language="javascript" src="popup.php_arquivos/shBrushXml.js"></script>
	<style type="text/css">.dp-cpp .datatypes { color: #2E8B57; font-weight: bold; }</style></head>
	<body>
		<div class="dp-highlighter"><div class="bar"></div><ol start="1" class="dp-cpp"><li class="alt"><span><span class="comment">//Definição&nbsp;dos&nbsp;pinos</span><span>&nbsp;&nbsp;</span></span></li><li class=""><span><span class="preprocessor">#define&nbsp;pinAnalogico&nbsp;&nbsp;&nbsp;&nbsp;A0</span><span>&nbsp;&nbsp;</span></span></li><li class="alt"><span><span class="preprocessor">#define&nbsp;pinButton&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;13</span><span>&nbsp;&nbsp;</span></span></li><li class=""><span><span class="preprocessor">#define&nbsp;pinMotor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6&nbsp;//&nbsp;PWM</span><span>&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;</span></li><li class=""><span><span class="keyword">void</span><span>&nbsp;setup()&nbsp;{&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;<span class="comment">//Configuração&nbsp;do&nbsp;regime&nbsp;de&nbsp;trabalho&nbsp;dos&nbsp;pinos&nbsp;e&nbsp;comunicação&nbsp;serial</span><span>&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;pinMode(pinButton,&nbsp;INPUT_PULLUP);&nbsp;&nbsp;</span></li><li class="alt"><span>&nbsp;&nbsp;pinMode(pinMotor,&nbsp;OUTPUT);&nbsp;&nbsp;</span></li><li class=""><span>&nbsp;&nbsp;Serial.begin(115200);&nbsp;<span class="comment">//&nbsp;Inicia&nbsp;porta&nbsp;serial</span><span>&nbsp;&nbsp;</span></span></li><li class="alt"><span>}&nbsp;&nbsp;</span></li><li class=""><span>&nbsp;&nbsp;</span></li><li class="alt"><span><span class="datatypes">float</span><span>&nbsp;lerTensao()&nbsp;{&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;<span class="comment">//Realiza&nbsp;a&nbsp;leitura&nbsp;retornando&nbsp;valores&nbsp;de&nbsp;unidade&nbsp;entre&nbsp;0-1023&nbsp;(0-3.3V)</span><span>&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;<span class="datatypes">int</span><span>&nbsp;valorSensor&nbsp;=&nbsp;analogRead(pinAnalogico);&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;<span class="comment">//Realiza&nbsp;conversão</span><span>&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;<span class="datatypes">int</span><span>&nbsp;&nbsp;tensao_int&nbsp;=&nbsp;map(valorSensor,&nbsp;0,&nbsp;1023,&nbsp;0,&nbsp;330);&nbsp;</span><span class="comment">//&nbsp;SOMENTE&nbsp;PARA&nbsp;DUE</span><span>&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;<span class="datatypes">float</span><span>&nbsp;tensao&nbsp;=&nbsp;tensao_int;&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;tensao;&nbsp;&nbsp;</span></span></li><li class=""><span>}&nbsp;&nbsp;</span></li><li class="alt"><span>&nbsp;&nbsp;</span></li><li class=""><span><span class="keyword">void</span><span>&nbsp;exibeMensagem(</span><span class="datatypes">float</span><span>&nbsp;tensao,&nbsp;</span><span class="datatypes">int</span><span>&nbsp;rc)&nbsp;{&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;<span class="datatypes">float</span><span>&nbsp;rc_perc&nbsp;=&nbsp;rc&nbsp;*&nbsp;100.0&nbsp;/&nbsp;255;&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;Serial.println(<span class="string">"A&nbsp;tensao&nbsp;em&nbsp;AO&nbsp;=&nbsp;&nbsp;"</span><span>&nbsp;+&nbsp;(String)tensao&nbsp;+&nbsp;</span><span class="string">"&nbsp;volts&nbsp;&nbsp;Sinal&nbsp;PWM&nbsp;=&nbsp;"</span><span>&nbsp;+&nbsp;(String)rc_perc&nbsp;+&nbsp;</span><span class="string">"%"</span><span>);&nbsp;&nbsp;</span></span></li><li class="alt"><span>}&nbsp;&nbsp;</span></li><li class=""><span>&nbsp;&nbsp;</span></li><li class="alt"><span><span class="datatypes">int</span><span>&nbsp;calculaRC(</span><span class="datatypes">float</span><span>&nbsp;tensao)&nbsp;{&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;<span class="datatypes">int</span><span>&nbsp;rc&nbsp;=&nbsp;map(tensao,&nbsp;0,&nbsp;330,&nbsp;0,&nbsp;255);&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;rc;&nbsp;&nbsp;</span></span></li><li class=""><span>}&nbsp;&nbsp;</span></li><li class="alt"><span><span class="keyword">void</span><span>&nbsp;loop()&nbsp;{&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;<span class="datatypes">float</span><span>&nbsp;tensao&nbsp;=&nbsp;lerTensao();&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;<span class="datatypes">int</span><span>&nbsp;rc&nbsp;=&nbsp;calculaRC(tensao);&nbsp;&nbsp;</span></span></li><li class=""><span>&nbsp;&nbsp;tensao&nbsp;/=&nbsp;100.0;&nbsp;&nbsp;</span></li><li class="alt"><span>&nbsp;&nbsp;exibeMensagem(tensao,&nbsp;rc);&nbsp;&nbsp;</span></li><li class=""><span>&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(!digitalRead(pinButton))&nbsp;{&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;analogWrite(pinMotor,&nbsp;rc);&nbsp;&nbsp;</span></li><li class=""><span>&nbsp;&nbsp;}&nbsp;<span class="keyword">else</span><span>&nbsp;{&nbsp;&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;analogWrite(pinMotor,&nbsp;0);&nbsp;&nbsp;</span></li><li class=""><span>&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class="alt"><span>}&nbsp;&nbsp;</span></li></ol></div>
			<script language="javascript">
		<!--
			dp.SyntaxHighlighter.HighlightAll('code', true,false);
			document.body.removeChild(document.getElementById("code"));
	  -->
	</script>

</body></html>